function G(B){if("string"==typeof (B)){return document.getElementById(B);}else{return B;}}var topbar={config:{dataUrl:"http://youa.baidu.com/data/0/user/0/topbar?callback=topbar.server.set&.js",blink:2000,observerTime:10000},init:function(){if(G("topbar")){G("topbar").innerHTML='<div class="gm-master-dashboard"><span id="topbar_status"></span><a href="http://co.youa.baidu.com/content/misc/buy/" target="_blank">我要买</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://youa.baidu.com/pub" target="_blank">我要卖</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a target="_blank" href="http://youa.baidu.com/jump?url=http%3A%2F%2Fwww.baifubao.com">百付宝</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a target="_blank" href="http://co.youa.baidu.com/content/help/" target="_blank">帮助中心</a>&nbsp;&nbsp;|&nbsp;&nbsp;<span class="more" onmouseover="this.getElementsByTagName(\'span\')[0].style.display=\'block\';" onmouseout="this.getElementsByTagName(\'span\')[0].style.display=\'none\';">更多服务<span><a href="javascript:void(0)" class="moreplc">更多服务</a><a target="_blank" href="http://www.baidu.com/">百度首页</a><a target="_blank" href="http://co.youa.baidu.com/content/hi/">百度HI</a></span></span></div><div class="gm-master-nav"><span class="cl"></span><span class="cr"></span><span id="topbar_my_bill"></span><a target="_blank" href="http://youa.baidu.com/my/">我的有啊</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a target="_blank" href="http://youa.baidu.com/user/0/cang/0/item">我的收藏</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#" id="topbar_baiduhi" onclick="startBaiduHi(\'c2cmsg\',\'\',\'\',{method:\'ccmsg\',iid:\'\'});return false;">我的消息<span id="topbar_my_msg"></span></a></div>';}if(User.isLoginBaidu()){var A=topbar.cache.read();if(A&&A.uname){if(new Date().getTime()-parseInt(A.date,36)>topbar.config.blink){this.show("login");topbar.server.updata();}else{if(A.uname){this.show("login");}else{this.show("logout");}}}else{this.server.updata();}}else{this.show("logout");}this.observer.init();},show:function(D){var C=encodeURIComponent(location.href);if(D=="login"){var B=this.cache.read();if(G("topbar_status").className!="login"){G("topbar_status").innerHTML="<strong>"+B.uname+'</strong>&nbsp;&nbsp;[<a href="http://passport.baidu.com/?logout&u='+C+'">退出</a>]&nbsp;&nbsp;|&nbsp;&nbsp;';G("topbar_status").className="login";}else{if(G("topbar_status").getElementsByTagName("STRONG")[0].innerHTML!=B.uname){G("topbar_status").innerHTML="<strong>"+B.uname+'</strong>&nbsp;&nbsp;[<a href="http://passport.baidu.com/?logout&u='+C+'">退出</a>]&nbsp;&nbsp;|&nbsp;&nbsp;';}}var A=B.my.order;if(A!=0){G("topbar_my_bill").innerHTML='<a target="_blank" href="http://youa.baidu.com/order/0/buyer/0/bought">等我付款(<b>'+A+"</b>)</a>&nbsp;&nbsp;|&nbsp;&nbsp;";}else{G("topbar_my_bill").innerHTML="";}G("topbar_baiduhi").onclick=function(){startBaiduHi("c2cmsg",B.uname,"",{method:"ccmsg",iid:""});return false;};this.login=true;}else{if(G("topbar_status").className!="logout"){G("topbar_status").innerHTML='[<a href="http://passport.baidu.com/?login&tpl=cc&tpl_reg=cc&u='+C+'">登录</a>]&nbsp;&nbsp;[<a href="http://passport.baidu.com/?reg&tpl=cc&tpl%5Freg=cc&u='+C+'">立即注册</a>]&nbsp;&nbsp;|&nbsp;&nbsp;';G("topbar_status").className="logout";}if(G("topbar_my_bill").innerHTML){G("topbar_my_bill").innerHTML="";}G("topbar_my_msg").innerHTML="";if(this.cache.read()!=null){this.cache.create("");}this.login=false;}},imchange:function(A){if(this.login){if(A==0){G("topbar_my_msg").innerHTML="";}else{G("topbar_my_msg").innerHTML="(<b>"+A+"</b>)";}}else{G("topbar_my_msg").innerHTML="";}},cache:{read:function(){var data=document.cookie.match("topbar=(.*?)(;|$)");if(data!=null&&data[1]!=""){data=eval("("+unescape(data[1])+")");return data;}else{return null;}},create:function(A){document.cookie="topbar="+A+";path=/";}},server:{updata:function(){if(G("topbar_data")){G("topbar_data").parentNode.removeChild(G("topbar_data"));}script=document.createElement("SCRIPT");script.type="text/javascript";script.id="topbar_data";script.src=topbar.config.dataUrl;document.getElementsByTagName("HEAD")[0].appendChild(script);},set:function(A){if(A&&A.uname){topbar.cache.create('{uname:"'+escape(A.uname)+'",date:"'+new Date().getTime().toString(36)+'",my:{order:"'+A.my.order+'"}}');topbar.show("login");}else{topbar.show("logout");}}},observer:{init:function(){this.data=topbar.cache.read();this.start();},start:function(){var A=setTimeout("topbar.observer.check()",topbar.config.observerTime);},check:function(){var C=this.data?this.data:{};var B=topbar.cache.read()?topbar.cache.read():{};var A=(B.uname?B.uname:false);var D=(C.uname?C.uname:false);if(A!=D){if(A){topbar.show("login");}else{topbar.show("logout");}}else{if(C.my&&B.my){if(C.my.order!=B.my.order){topbar.show("login");}}}this.start();this.data=topbar.cache.read();}}};var User={};User.Data=Object();User.goReg=function(){var A=pspsServerUrl+"?reg&tpl=cc&u="+encodeURIComponent(location.href);location.href=A;};User.Data.imInit=function(A){document.getElementById("topbar_my_msg").innerHTML=(A!=0?"(<b>"+A+"</b>)":"");setTimeout("User.Data.imUpdata()",30*1000);};User.Data.imUpdata=function(){if(User.isLoginBaidu()){var A="http://fetch.im.baidu.com/ihaloader?op=msgcount&charset=gbk&callback=User.Data.imInit&refer=mall.baidu.com";if(document.getElementById("immsgcount")){document.getElementById("immsgcount").parentNode.removeChild(document.getElementById("immsgcount"));}script=document.createElement("SCRIPT");script.type="text/javascript";script.id="immsgcount";script.src=A+"&t="+new Date().getTime().toString(36);document.getElementsByTagName("HEAD")[0].appendChild(script);}};User.isLoginBaidu=function(){return(document.cookie.indexOf("BDUSS=")>-1);};User.Login={_failTimes:0};User.Login.show=function(B,A){User.Login._callbackWhenOk=B;if(typeof (Dialog)!="undefined"){if(!User._Login){User._Login=new Dialog({className:"panel-t4",center:true,width:300,footer:true,caption:"百度注册用户请直接登录",content:'<div class="panel-login">							<form id="panel-login" method="post" action="'+pspServerUrl+'/?login&tpl=sp&tpl_reg=sp&u=" >								<p class="s1" id="login-err">您需要登录后才能继续刚才的操作</p>								<input type="hidden" name="u" value="'+window.location.href+'">								<input type="hidden" name="t" value="0">								<input type="hidden" name="keyname" value="cc">								<ul>									<li>										<label class="k" for="loginusername">用户名：</label>										<span class="v"><input type="text" size="20" name="username" id="loginusername"></span>									</li>									<li>										<label class="k" for="loginpass">密　码：</label>										<span class="v"><input type="password" size="20" name="loginpass" id="loginpass"></span>									</li>									<li class="submit">										<label class="k">&nbsp;</label>										<span class="v"><button type="submit" id="login-submit" >登录</button><a href="'+pspsServerUrl+'/?getpass">忘记密码？</a></span>									</li>								</ul>								<div class="s2" id="user_register_ctn" style="display:none">									<h4>没有百度帐号？</h4>									<button type=button id="user_register_btn" onclick="User.goReg();" >立即注册</button>								</div>							</form>							</div>'});User._Login.show();$("panel-login").onsubmit=function(){var E=$("loginusername");var C=$("loginpass");if(E.value.trim()==""||C.value==""){if(E.value.trim()){C.focus();}else{E.focus();}return false;}$("login-submit").disabled=true;User.Login.hint("提交数据中");var D=document.createElement("SCRIPT");D.type="text/javascript";D.src=pspsServerUrl+"/?logt&username="+E.value.trim()+"&loginpass="+C.value+"&mem_pass=off&t=0&keyname=cc";document.getElementsByTagName("HEAD")[0].appendChild(D);return false;};}else{User._Login.show();}if(A){$("user_register_ctn").style.display="";}else{$("user_register_ctn").style.display="none";}}else{window.location=pspServerUrl+"/?login&tpl=sp&tpl_reg=sp&u="+encodeURIComponent(window.location.href);}};User.Login.hint=function(A){$("login-err").innerHTML=A;};User.Login.hide=function(){User._Login.hide();};function PSP_cc(A){if(A==0){try{window.isLogin="1";User.Login.hide();$("login-submit").disabled=false;var C=User.Login._callbackWhenOk;if(C){C();}}catch(B){}}else{User.Login.hint("很抱歉，登录失败！");$("login-submit").disabled=false;if(User.Login._failTimes++>2){window.setTimeout(function(){window.location=pspServerUrl+"/?login&tpl=sp&tpl_reg=sp&u="+window.location.href;},2000);}}}topbar.init();window.startBaiduHi=(function(){var C=navigator.userAgent.indexOf("MSIE")>-1&&!window.opera,H=navigator.userAgent.indexOf("Firefox")!=-1;function A(){var B="";try{B=new ActiveXObject("WebDetect.Detect").GetVersion();}catch(J){}try{if(typeof (navigator.mimeTypes["application/x-baiduhi"])=="object"){B=".*";}}catch(J){}return B;}function I(J,K){var B=new Date(),L=B.getTime();B.setTime(L+30*1000);document.cookie="IM_add="+escape(J+"|youa.baidu.com|"+(new Date().getTime()).toString(36)+"|dataC2cType|{sellerUsername:'"+J+"'"+((K)?",productId:'"+K+"'":"")+"}")+";domain=baidu.com;path=/;expires="+B.toGMTString();if(!/(^| )IM_=/.test(document.cookie)){F("http://web.im.baidu.com");}}function F(B){if(F.f&&F.f.tagName=="FORM"){F.f.action=B;F.f.submit();return ;}var J=document.createElement("DIV");J.style.display="none";document.body.insertBefore(J,document.body.firstChild);J.innerHTML="<form name='__IM_REDIRECT_FORM' method='get' target='baidu_webim' action='"+B+"'></form>";F.f=document.forms.__IM_REDIRECT_FORM;F.f.submit();J=null;}function E(J){var B=[];for(prop in J){if(prop!="onim"&&prop!="onwebim"){B.push(prop+"="+J[prop]);}}return(B.length>0?"&"+B.join("&"):"");}function D(B,L,J,K){new Image().src="http://im.baidu.com/nop?type="+B+"&sid="+L+"&id="+J+E(K)+"&t="+new Date().getTime();}return function(K,N,L,M){D(K,N,L,M);var J=A();if(J==""){if(/c2cmsg|message|addcontact|addgroup|creategroup/i.test(K)){I(L,M.iid);if(M&&M.onwebim){M.onwebim();}}return false;}if(new RegExp(J.replace(/(\.)/g,"\\."),"i").test(K)){var B="baidu://"+K+"/?sid="+N+"&id="+L+E(M);if(C){B=B+"&browser=IE";}else{if(H){B=B+"&browser=FF&promo=c2cmsg|message|addgroup|creategroup|addcontact";}}if(M&&M.onim){M.onim();}window.location.href=B;}else{if(K){F("http://im.baidu.com/promo/"+K+".html");}}};})();User.Data.imUpdata();